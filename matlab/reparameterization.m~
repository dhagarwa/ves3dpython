function [] = reparameterization()
      clc

    m = 31;
    n = m;
    R = 1;
    
    %theta = pi/2;
    %phi = pi/3;
    %trg = [R*sin(theta)*cos(phi) R*sin(theta)*sin(phi) R*cos(theta)]
    patches = [];
    for i=1:6
       patch =  standardSphereSkewPatch(m, n, i, R);
       
       patch.q_sl = fooVec(patch.r);
       patch.q_dl = ones(size(patch.r,1), 3);
       patches = [patches patch];
       %val = val + DLSmoothPatch(trg, 1, patch, patch.q_dl);
       
        
    end

    S = Surface(patches, [1, 0, 0]);
    %DLvalue = DLSmooth(trg,1,S)
    
    %assign tensile force as q_sl
    sigma = [(patches(1).x).^2 (patches(2).x).^2 (patches(3).x).^2 (patches(4).x).^2 (patches(5).x).^2 (patches(6).x).^2]; % tensile scalar
    sigma = sigma(:);
    fs = S.getTensileForce(sigma);
    for ii=1:6
        
        S.patches(ii).q_sl = fs((ii-1)*m*n+1:ii*m*n, :);
        
    end
    
    %reparameterization
    tau = 0.00001;
    
    %plotSurface(S);
    y0 = S.getPosition();
    scatter3(y0(:,1), y0(:,2), y0(:,3));
    figure;
    for ii=1:45
        
        y0 = S.getPosition();
        iter = ii
        E0 = getParamEnergy(S)
        n0 = S.getNormals();
        
        g0 = getPatchwiseLap(S);
        pg0 = g0 - repmat(dot(n0,g0,2),[1,3]).*n0;
        u0 = -pg0;
        
        max_grad_norm = max(vecnorm(u0, 2, 2))
        
        S.updateSurface(u0, tau);
        S.updateStale();
        y1 = S.getPosition();
        if max(vecnorm(y1-y0,2, 2)) < 0.00001
            break
        end
        
    end
    %plotSurface(S);
    scatter3(y0(:,1), y0(:,2), y0(:,3));

end

